<!doctype html>
<html lang="en" ng-app='InboxApp'>
<head>
    <meta charset="utf-8">
    <title>Inbox</title>

<link rel="stylesheet" href="css/style.css"/>

<!-- typekit -->
<!-- <script type="text/javascript" src="//use.typekit.net/ccs3tld.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
 -->
</head>
<body>

<div id="wrapper" ngCloak data-ng-controller="AppContainerController">

  <!--  <div id="header">&nbsp;</div>  -->
  <div id="main">
    <div class="header box_with_shadow">
      <sidebaricon view="search"></sidebaricon>

      <div class="header_left">
        <headersearchbox handler="performSearch"></headersearchbox>
        <div style="float:right">
          <div class="action_button clickable compose" ng-click="composeButtonHandler()">New</div>
          <div class="action_button_sep"></div>
        </div>
      </div>

      <!-- Mail view actions -->
      <div class="header_right" ng-show="isMailViewActive">
        <div class="action_button clickable archive" ng-click="archiveButtonHandler()">Archive</div>
        <div class="action_button_sep"></div>
        <div class="action_button clickable todo" data-ng-click="todoButtonHandler()">Todo</div>
        <div class="action_button_sep"></div>

        <div class="action_button clickable snooze">Snooze</div>
        <div class="action_button_sep"></div>
        <div class="action_button clickable move">Move</div>
        <div class="action_button_sep"></div>
        <div class="action_button clickable group">Group</div>
        <div class="action_button_sep"></div>
        <div class="action_button clickable more">&nbsp;</div>
      </div>

      <!-- Todo view actions -->
      <div class="header_right" ng-show="isTodoViewActive">
        <div class="action_button clickable todo">Complete</div>

        <div class="action_button clickable more">&nbsp;</div>
      </div>
    </div>

    <div class="clear"></div>

    <div class="sidebar box_with_shadow height_main">
      <sidebaricon view="mail" active="isMailViewActive" handler="activateMailView()"></sidebaricon>
      <sidebaricon view="todo" active="isTodoViewActive" handler="activateTodoView()"></sidebaricon>
      <sidebaricon view="stacks" active="isStacksViewActive"></sidebaricon>
      <sidebaricon view="people" active="isPeopleViewActive"></sidebaricon>
      <sidebaricon view="groups" active="isGroupsViewActive"></sidebaricon>
      <sidebaricon view="settings" active="isSettingsViewActive"></sidebaricon>
    </div>

    <!-- MAIL MASTER VIEW -->
    <div class="master_pane height_main" ng-show="isMailViewActive">
      <div class="category_bar box_with_shadow">
        <span class="category_bar_active">Inbox</span>
        <span>Drafts</span>
        <span>Sent</span>
        <span>Label&nbsp;<span style="font-size: 9px; display:inline;">&#x25BC;</span></span>
        <span>Snoozed</span>
        <span>All</span>
      </div>
      <div class="clear"></div>

      <div class="messagelist">
        <itemcell data-ng-repeat="t in displayedThreads"
        thread="t"
        data-ng-click="openThread(t)"
        selected="t == activeThread">
        </itemcell>
      </div>
    </div>

    <!-- FULL COMPOSE MASTER VIEW -->
    <div class="detail_pane height_main"
      ng-show="isFullComposerViewActive">
      <view:fullcompose send-button-action="sendMessage(body,subject,recipients)" is-full-composer-view-active="isFullComposerViewActive"></view:fullcompose>
    </div>

    <!-- MAIL DETAIL VIEW -->
    <div class="detail_pane height_main"
      ng-show="isMailMessageViewActive">

      <div class="message_container box_with_shadow"
        ng-show="activeThread">

        <div class="content_head">
          <div class="email_content_title"
            ng-bind="activeThread.subject">
          </div>
        </div>
      </div>

      <div class="message_container box_with_shadow"
        ng-repeat="message in activeThread.messages">
        <view:message message="message"></view:message>
      </div>

      <div class="message_container box_with_shadow">
        <div class="contentFoot" ng-show="activeThread">
          <replybox send-button-action="sendMessage(message_text)"></replybox>
        </div>
      </div>
    </div>

    <!-- TODO MASTER VIEW -->
    <div class="master_pane height_main" ng-show="isTodoViewActive">

      <div class="container_scrollable">

        <div class="list_item_todo_category">Today</div>
        <div class="clear"></div>

        <div ui-sortable="sortableOptions" ng-model="displayTodos" class="list">
          <list:item:todo
          ng-repeat="t in displayedTodos"
          todo="t"
          ng-click="openTodo(t)"
          selected="t == activeTodo">
          </list:item:todo>
        </div>
      </div>
    </div>

    <!-- Todo detail view -->
    <div class="detail_pane height_main"
      ng-show="isTodoMessageViewActive">

      <div class="message_container box_with_shadow"
        ng-show="activeTodo">

        <div class="content_head">
          <div class="email_content_title"
            ng-bind="activeTodo.display_name">
          </div>
        </div>
      </div>

      <div class="message_container box_with_shadow"
        ng-repeat="message in activeTodo.thread.messages">
        <view:message message="message"></view:message>
      </div>

      <div class="message_container box_with_shadow">
        <div class="contentFoot" ng-show="activeTodo">
          <replybox send-button-action="sendMessage(message_text)"></replybox>
        </div>
      </div>
    </div>
  </div>
</div>

<!--

  JavaScript Includes

-->

<script src="lib/jquery.min.js"></script>
<script src="lib/jquery-ui.min.js"></script>

<script type="text/javascript">
  // Patch jQuery because $.browser was removed in 1.9
  // TODO add jQuery Browser plugin
  jQuery.browser={};(function(){jQuery.browser.msie=false;
  jQuery.browser.version=0;if(navigator.userAgent.match(/MSIE ([0-9]+)\./)){
  jQuery.browser.msie=true;jQuery.browser.version=RegExp.$1;}})();
</script>


<script src="lib/jquery-utils/jquery.ui.widget.js"></script>
<script src="lib/jquery-utils/jquery.iframe-transport.js"></script>
<script src="lib/jquery-utils/jquery.fileupload.js"></script>


<!-- Must be placed before angular.js.
    This file is needed for upload progress/abort or non HTML5 FormData browsers-->
<script src="lib/angular-modules/angular-file-upload-shim.js"></script>


<!-- Aaaaaaaangular -->
<script src="lib/angular/angular.js"></script>
<script src="lib/angular/angular-route.js"></script>
<script src="lib/angular/angular-sanitize.js"></script>
<script src="lib/angular/angular-cookies.js"></script>
<script src="lib/angular-modules/angular-file-upload.js"></script>
<script src="lib/angular-modules/angular-ui.js"></script>
<script src="lib/angular-modules/localStorageModule.js"></script>
<script src="lib/angular-modules/sortable.js"></script>
<script src="lib/angular-modules/mousetrap.js"></script>
<script src="lib/angular-modules/angular-md5.js"></script>
<script src="lib/socketio/socket.io.js"></script>


<!-- InboxApp files -->
<script src="js/app.js"></script>

<script src="js/controllers/AppContainerController.js"></script>
<script src="js/controllers/CookieController.js"></script>

<script src="js/models.js"></script>

<script src="js/services/Layout.js"></script>
<script src="js/services/Wire.js"></script>
<script src="js/services/Growl.js"></script>
<script src="js/services/ProtocolHandler.js"></script>
<script src="js/services/DB.js"></script>


<script src="js/directives/directives.js"></script>
<script src="js/directives/messageView.js"></script>
<script src="js/directives/replyBox.js"></script>
<script src="js/directives/fullComposeView.js"></script>

<script src="js/filters.js"></script>

</body>
</html>
